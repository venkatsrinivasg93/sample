<div class="container" style="margin-top: 100px" #divToScroll>
  <!-- <h3 class=" text-center">Messaging</h3> -->
  <div class="messaging">
    <div class="inbox_msg">
      <div class="inbox_people">
        <div class="headind_srch">
          <div class="recent_heading">
            <h4>Users</h4>
          </div>
        </div>
        <div class="inbox_chat">
          <div *ngFor='let chatm1 of chatmapp1'>
            <div *ngFor='let chatm2 of chatm1'>
              <div class="chat_list active_chat">
                <div class="chat_people">

                  <div class="container" id="userBox">
                    <div class="row">
                      <div class="col-md-3">
                        <div> <img src="{{chatm2.img}}" alt="user image" width="100%" height="50px"
                            style="border-radius: 50%" alt="sunil"> </div>
                      </div>
                      <div class="col-md-8">
                        <div class="chat_ib"
                        (click)='chatopen(chatm2.user1,chatm2.user2,chatm2.cnsid,chatm2.propertyid,chatm2.cmsid)' >

                          <div (click)='displayimg(chatm2.img,chatm2.user1name)'>
                            <div *ngIf='userid!=chatm2.user1'>{{chatm2.user1name}}

                              <div *ngIf='userid==chatm2.ownerid'> This person is interested on {{chatm2.propertyname}} property
                              </div>
                              <div *ngIf='userid!=chatm2.ownerid'> you interested on his {{chatm2.propertyname}} property
                              </div>
                            </div>
                          </div>
                          <div (click)='displayimg(chatm2.img,chatm2.user2name)'>
                            <div *ngIf='userid!=chatm2.user2'>{{chatm2.user2name}}


                              <div *ngIf='userid==chatm2.ownerid'> This person is interested on {{chatm2.propertyname}} property
                              </div>
                              <div *ngIf='userid!=chatm2.ownerid'> you interested on his {{chatm2.propertyname}} property
                              </div>
                            </div>
                          </div>

                        </div>
                      </div>
                      <div class="col-md-1">
                        <b>
                          {{chatm2.ncount}}</b>
                      </div>
                    </div>
                  </div>



                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="container">
        <div class="row" style="    border-bottom: 1px solid black;
        padding-bottom: 10px;
        margin-top: 10px;">
          <div class="col-md-4">
            <div *ngIf='userimg!=null'>
              <img src="{{userimg}}" alt="user image" width="50%" height="50px" style="border-radius: 50%" alt="sunil">
            </div>
          </div>
          <div class="col-md-4" id="userDisplayName">
            {{userdisplayname}}
          </div>
          <div class="col-md-4">
            <b *ngIf="userstatus=='online'">
              <img src="../../assets/images/online.jpg" alt="user image" width="10px" height="10px"
                style="border-radius: 50%" alt="online"> {{userstatus}}</b>
            <b *ngIf="userstatus=='offline'">
              <img src="../../assets/images/offline.png" alt="user image" width="15px" height="15px"
                style="border-radius: 50%" alt="online"> {{userstatus}}</b>
          </div>

        </div>
        <div class="row">
          <div class="col-md-12">
            <div id='scroll'>

              <div class="msg_history" #scrollMe [scrollTop]="scrollMe.scrollHeight">
                <div>
                  <div>
                    <div class="incoming_msg">
                      <div>
                        <div class="incoming_msg_img">
                        </div>
                      </div>
                      <div *ngFor="let item of messageArray">
                        <div class="outgoing_msg" *ngIf='item.user==userid'>
                          <div class="sent_msg">
                            <p id="messages">
                              {{item.message}}
                            </p>
                          </div>
                        </div>
                        <div class="received_msg" *ngIf='item.user!=userid'>
                          <div class="received_withd_msg">
                            <p id="messages">
                              {{item.message}}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="type_msg">
                <div class="input_msg_write">
                  <input type="text" class="write_msg" placeholder="Type a message" [(ngModel)]="messageText" />
                  <button class="msg_send_btn" type="button" *ngIf='room!=null && messageText!=null'><i
                      class="fa fa-paper-plane-o" aria-hidden="true" (click)="sendMessage()"></i></button>
                </div>
              </div>
            </div>
          </div>

        </div>

      </div>

    </div>
  </div>
</div>
<!-- {{userstatus}}
<button (click)='checkuseronline()'>checkuseronline</button> -->
